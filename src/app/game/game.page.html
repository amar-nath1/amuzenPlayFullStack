<ion-header>
  <ion-toolbar>
    <ion-title>Quick Game</ion-title>
  </ion-toolbar>
</ion-header>

<ion-content class="game-page" fullscreen>
  <div class="container">
    <h2 class="title">Pick & Lock a Number</h2>

    <ng-container *ngIf="lockedIndex === null; else lockedView">
      <ion-grid>
        <ion-row>
          <ion-col size="12" size-md="6" *ngFor="let n of numbers; index as i">
            <ion-card class="num-card">
              <ion-card-header>
                <ion-card-title>Card {{ i + 1 }}</ion-card-title>
              </ion-card-header>
              <ion-card-content>
                <div class="number">{{ n }}</div>
                <ion-button expand="block" color="primary" (click)="lockCard(i)">Lock</ion-button>
              </ion-card-content>
            </ion-card>
          </ion-col>
        </ion-row>
      </ion-grid>
      <div class="actions">
        <ion-button fill="outline" (click)="generateNumbers()">Shuffle</ion-button>
        <ion-button (click)="goBack()">Back</ion-button>
      </div>
    </ng-container>

    <ng-template #lockedView>
      <div class="locked-card">
        <ion-card>
          <ion-card-header>
            <ion-card-title>Selected Number</ion-card-title>
            <ion-card-subtitle>Card {{ (lockedIndex ?? 0) + 1 }}</ion-card-subtitle>
          </ion-card-header>
          <ion-card-content>
            <div class="number big">{{ numbers[lockedIndex ?? 0] }}</div>
            <div class="pay-actions">
              <ion-button expand="block" color="success" (click)="pay()">Pay Rs.15</ion-button>
              <ion-button expand="block" fill="outline" (click)="generateNumbers()">Choose Again</ion-button>
            </div>
          </ion-card-content>
        </ion-card>
      </div>
    </ng-template>

  </div>
</ion-content>
